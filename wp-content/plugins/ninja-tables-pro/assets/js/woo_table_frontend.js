jQuery(document).ready((function(t){function n(n){n.find("tbody tr").each((function(){var n=t(this);if(!(n.find(".bulk_select_item").length>0)){var a=function(t){var n=null,a=t.find("[data-product_id]");if(a.length&&(n=a.attr("data-product_id")||a.data("product_id")),!n){var e=t.find(".nt_woo_quantity");e.length&&(n=e.data("product_id"))}if(!n){var o=t.find(".nt_woo_attribute");o.length&&(n=o.data("product_id"))}return n||"row_"+t.index()}(n),e='\n                <td class="bulk-select-cell">\n                    <input type="checkbox" class="bulk_select_item" \n                           data-product-id="'.concat(a,'"\n                           title="Select Product">\n                </td>\n            ');n.prepend(e)}}))}function a(t){var n=t.find(".bulk_select_item:checked").length;t.find(".selected_count").text("".concat(n," selected"))}function e(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",e='\n            <div class="bulk-message alert '.concat("success"===a?"alert-success":"error"===a?"alert-danger":"alert-info",'" style="position: fixed; top: 20px; right: 20px; z-index: 9999; padding: 10px 15px; border-radius: 4px; max-width: 300px;">\n                ').concat(n,"\n            </div>\n        ");t(".bulk-message").remove(),t("body").append(e),setTimeout((function(){t(".bulk-message").fadeOut((function(){t(this).remove()}))}),3e3)}jQuery(document).on("ninja_table_loaded",(function(o,i,r){var c;if("wp_woo"==r.provider){var d={},l=window.ninjaTableCartItems||{};window.selectedVariations=d,"yes"===(null===(c=r.settings.appearance_settings)||void 0===c?void 0:c.show_bulk_actions)&&function(o,i,r){i.table_id,function(t,n){var a=t.find("thead"),e=t.find("thead tr.footable-header th").length,o='\n            <tr class="footable_bulk_actions">\n                <th colspan="'.concat(e+1,'" style="padding: 8px 15px; background-color: #f8f9fa; border-bottom: 1px solid #dee2e6;">\n                    <div class="bulk_actions_container">\n                        <span class="selected_count">0 selected</span>\n                        <div class="bulk_actions_controls">\n                            <select class="bulk_action_select">\n                                <option value="">Choose Action</option>\n                                <option value="compare">Compare Products</option>\n                                <option value="add_to_cart">Add to Cart</option>\n                            </select>\n                            <button class="bulk_action_apply">Apply</button>\n                        </div>\n                    </div>\n                </th>\n            </tr>\n        ');a.prepend(o),t.find(".footable-filtering th, .footable-empty th").attr("colspan",e+1)}(o),function(t){var n=t.find("thead tr.footable-header");n.prepend('<th class="bulk-select-header"><input type="checkbox" class="bulk_select_all" title="Select All"></th>')}(o),n(o),function(n,o){n.on("change",".bulk_select_all",(function(){var e=t(this).is(":checked");n.find(".bulk_select_item").prop("checked",e),a(n)})),n.on("change",".bulk_select_item",(function(){a(n),function(t){var n=t.find(".bulk_select_item").length,a=t.find(".bulk_select_item:checked").length,e=n>0&&n===a;t.find(".bulk_select_all").prop("checked",e)}(n)})),n.on("click",".bulk_action_apply",(function(){var i=n.find(".bulk_action_select").val(),r=function(n,a){var e=[],o=FooTable.get(n);return n.find(".bulk_select_item:checked").each((function(){var n=t(this),a=n.closest("tr"),i=n.data("product-id"),r=null;if(o&&o.rows&&o.rows.all){var c=o.rows.all.find((function(t){return!(!t.$el||t.$el[0]!==a[0])}));r=c?c.value:null}e.push({productId:i,$row:a,rowData:r,checkbox:n})})),e}(n);if(i)if(0!==r.length)switch(i){case"compare":!function(t,n,a){n.length<2?alert("Please select at least 2 products to compare"):n.length>5?alert("You can compare maximum 5 products at a time"):"function"==typeof window.createComparisonModal?window.createComparisonModal(n,a):(console.error("Comparison modal functions not loaded. Please include the comparison modal file."),alert("Comparison feature is not available. Please contact support."))}(0,r,o);break;case"add_to_cart":!function(n,o,i){var r=[],c=!1;o.forEach((function(t){var n=t.$row,a=t.productId,e=n.find(".nt_woo_quantity").val()||1,o=n.find(".single_add_to_cart_button").attr("data-product_type")||"simple";if("variable"===o){var i=window.selectedVariations&&window.selectedVariations[a];if(!i||!i.variation_id)return alert("Please select product options for product ".concat(a," before adding to cart.")),void(c=!0);if(!window.isAllowedAddToCart(i,a))return alert("Product ".concat(a," is unavailable with the selected options.")),void(c=!0);r.push({product_id:a,variation_id:i.variation_id,attributes:i.attributes,quantity:parseInt(e),product_type:o})}else r.push({product_id:a,quantity:parseInt(e),product_type:o})})),c||0===r.length||function(n,o,i){var r={products:n,ninja_table:o.table_id,action:"ninja_table_wp_woo_add_to_cart"},c=t(".bulk_action_apply").text();t(".bulk_action_apply").text("Adding to cart...").prop("disabled",!0),t.post(window.ninja_footables.ajax_url,r).then((function(n){n.success?(function(t){t.find(".bulk_select_item").prop("checked",!1),t.find(".bulk_select_all").prop("checked",!1),t.find(".bulk_action_select").val(""),a(t)}(i),e("All products added to cart successfully!","success"),n.data&&n.data.cart_items&&(window.ninjaTableCartItems=n.data.cart_items),n.data&&n.data.fragments&&t(document.body).trigger("added_to_cart",[n.data.fragments.fragments,n.data.fragments.cart_hash])):e(n.data||"Failed to add some products to cart.","error")})).fail((function(t){console.error("Failed to add products to cart",t),e("Failed to add products to cart. Please try again.","error")})).always((function(){t(".bulk_action_apply").text(c).prop("disabled",!1)}))}(r,i,n)}(n,r,o)}else alert("Please select at least one item");else alert("Please select an action")}))}(o,i),o.on("postdraw.ft.table",(function(){n(o)}))}(i,r);var s=function(t,n){return Object.keys(t).every((function(a,e,o){return t[a]===n[a]&&n[a].length>0||0===t[a].length&&n[a].length>0}))},u=function(t){return 0===t.length||t.includes("")};window.isAllowedAddToCart=_,i.find(".nt_add_cart_wrapper").each((function(n,a){p(t(a))})),i.on("change",".nt_woo_attribute",(function(n){p(t(this),!0)})),i.on("change",".nt_woo_quantity",(function(n){var a=t(this),e=a.data("product_id");i.find(".nt_add_to_cart_"+e).attr("data-quantity",a.val())})),i.on("click",".single_add_to_cart_button",(function(n){n.preventDefault();var a={},e=t(this),o=e.attr("data-product_id"),c=e.attr("data-product_type");if("variable"===c){var s=d[o],u=s&&s.variation_id;if(!u)return alert("Please select some product options before adding this product to your cart."),!1;if(!_(s,o))return t(".selected_price_"+o).html(""),alert("Sorry, this product is unavailable. Please choose a different combination."),!1;a.variation_id=u,a.attributes=s&&s.attributes}a.product_id=o,a.quantity=e.attr("data-quantity"),a.product_type=c;var p={products:[a],ninja_table:r.table_id,action:"ninja_table_wp_woo_add_to_cart"};e.parent().addClass("nt_added_cart");var f=e.html();e.append('<span class="fooicon fooicon-loader"></span>'),t.post(window.ninja_footables.ajax_url,p).then((function(n){if("variable"===c){var a=n.data;l=a.cart_items,window.ninjaTableCartItems=l,t(document.body).trigger("added_to_cart",[a.fragments.fragments,a.fragments.cart_hash,e])}else t(document.body).trigger("added_to_cart",[n.fragments,n.cart_hash,e]);i.find("a.added_to_cart.wc-forward").html("");var r=t("#nt_product_qty_"+o);r.val(1),r.trigger("change")})).fail((function(t){})).always((function(){e.html(f)}))})),window.selectedVariations=d}function p(n){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],e=n.children(),o=e.data("product_id"),i=e.data("product_variations"),r=t(".ntb_attribute_select_"+o),c=r.data("attribute_name"),l=r.val(),p=e.data("product_type");if(a&&(o=n.data("product_id"),i=n.parents().children().data("product_variations"),p=n.parents().children().data("product_type"),c=n.data("attribute_name"),l=n.val(),r=t(".ntb_attribute_select_"+o)),"variable"===p){var f={},b={};r.each((function(n,e){var o=t(e),r=o.data("attribute_name"),d=o.data("attribute_label"),s=o.val(),p=o.data("default_options"),_=Object.keys(p),b=_;if(c!==r){for(var h=[],v=0;v<i.length;v++){var m=i[v];m.attributes[c]===l&&h.push(m.attributes[r])}b=u(h)?_:h}else b=_;o.empty(),o.append('<option value="">'+d+"</option>"),b.map((function(t,n){o.append('<option value="'+t+'">'+p[t]+"</option>")}));var g="";a&&!b.includes(s)?(o.val(""),g=""):(g=s,o.val(s)),f[r]=g})),b[o]=f,function(n,a){var e=t(".nt_add_to_cart_"+n),o=t(".selected_price_"+n),i=e.data("product_variations");i.length>0&&i.map((function(t,e){if(s(t.attributes,a[n])){var o=JSON.parse(JSON.stringify(t));o.attributes=a[n],d[n]=o}})),d[n]&&s(d[n].attributes,a[n])?_(d[n],n):(o.html(""),e.css("opacity","0.5"),delete d[n])}(o,b)}}function _(n,a){var e=n.variation_id,o=n.is_in_stock,i=n.backorders_allowed,r=n.max_qty,c=t(".nt_add_to_cart_"+a),d=t(".selected_price_"+a),s=n.price_html,u=n.availability_html;d.html(s+" "+u);var p=function(){return(o||i)&&(""===r||r>(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0))?(c.css("opacity","1"),!0):(c.css("opacity","0.5"),d.html(s+'<p class="stock out-of-stock">Out of stock</p>'),!1)};if(l&&Object.keys(l).length>0){var _=Object.values(l).find((function(t){return t.variation_id===e}));return _?p(_.quantity):p()}return p()}})),t("#nt-woo-bulk-actions-styles").length||t("head").append('\n        <style id="nt-woo-bulk-actions-styles">\n        .bulk-select-header {\n            width: 40px;\n            text-align: center;\n            padding: 8px !important;\n        }\n        \n        .bulk-select-cell {\n            width: 40px;\n            text-align: center;\n            padding: 8px !important;\n        }\n        \n        .bulk_actions_container {\n            display: flex;\n            justify-content: flex-start;\n            align-items: center;\n            width: 100%;\n            gap: 5px;\n        }\n        \n        .selected_count {\n            font-size: 12px;\n            color: #666;\n            font-weight: 500;\n        }\n        \n        .bulk_actions_controls {\n            display: flex;\n            align-items: center;\n            gap: 8px;\n        }\n        \n        .bulk_action_select {\n            padding: 4px 8px;\n            border: 1px solid #ddd;\n            border-radius: 3px;\n            font-size: 12px;\n            min-width: 130px;\n        }\n        \n        .bulk_action_apply {\n            padding: 4px 12px;\n            background: #007cba;\n            color: white;\n            border: none;\n            border-radius: 3px;\n            cursor: pointer;\n            font-size: 12px;\n            transition: background-color 0.2s;\n        }\n        \n        .bulk_action_apply:hover {\n            background: #005a87;\n        }\n        \n        .alert-success {\n            background-color: #d4edda;\n            color: #155724;\n            border: 1px solid #c3e6cb;\n        }\n        \n        .alert-danger {\n            background-color: #f8d7da;\n            color: #721c24;\n            border: 1px solid #f5c6cb;\n        }\n        \n        .alert-info {\n            background-color: #d1ecf1;\n            color: #0c5460;\n            border: 1px solid #bee5eb;\n        }\n        \n        .bulk_select_item, .bulk_select_all {\n            cursor: pointer;\n            transform: scale(1.1);\n        }\n        \n        .footable_bulk_actions {\n            border-bottom: 2px solid #007cba;\n        }\n        \n        @media (max-width: 768px) {\n            .bulk_actions_container {\n                flex-direction: column;\n                align-items: flex-start;\n                gap: 8px;\n            }\n        }\n        </style>\n    ')}));